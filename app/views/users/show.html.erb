<!-- #user can edit himself -->

<div class="row"></br></br>
<% if Lunch.last.groups.size == 0 %>
<% attending = Lunch.last.users.include?(@user) %>
    <div class="large-6 large-offset-3 columns yes <%= 'show' if attending %>"><h1 class="red"><strong>Current status: Not Participating</strong></h1></br></br><button class='button participating'>Change response to 'Yes'</button>
    </div></br>
    <div class="large-6 large-offset-3 columns no <%= 'show' if !attending %>"><h1 class="green"><strong>Current status: Participating</strong></h1></br><h2>Thanks for participating</h2><h3>We are looking forward to lunching with you</h3></br></br><button class='button notParticipating'>Change response to 'No'</button>
    </div></br>
<%end%>
</div>
<div class="textParticipating"></div>
<div class="row">
<%= simple_form_for @user do |f| %>
  <div class="large-6 large-offset-3 columns"><%= f.input :name %></div></br>
  <div class="large-6 large-offset-3 columns"><%= f.association :department, include_blank:false %></div></br>
  <div class="large-6 large-offset-3 columns"><%= f.association :lunchgroupleader, include_blank:false %></div></br>
  <div class="large-6 large-offset-3 columns"><%= f.input :optional %></div></br>
  <div class="large-6 large-offset-3 columns"><%= f.button :submit %></div></br>
<%end%>
</div>

<% content_for :extra_footer do %>
<script>
  window.onload=function(){
    clickYes();
    clickNo();
  }
  var clickYes = function(){

    $('.yes').click(function(e){
      e.preventDefault();
      $.get('<%= @user.id %>' + '/add_me', function(response){
        $('.yes').toggle();
        $('.no').toggle();
      });
    })
  }
    var clickNo = function(){
    $('.no').click(function(e){
      e.preventDefault();
      $.get('<%= @user.id %>' + '/not_me', function(response){
        $('.no').toggle();
        $('.yes').toggle();
      });
    })
    }
</script>
<% end %>
